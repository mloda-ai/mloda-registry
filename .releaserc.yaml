branches:
  - main
tagFormat: ${version}
plugins:
  - [
      "@semantic-release/commit-analyzer",
      {
        preset: "conventionalcommits",
        releaseRules:
          [
            { type: "minor", release: "minor" },
            { type: "feat", release: "patch" },
            { type: "impr", release: "patch" },
            { type: "refactor", release: "patch" },
            { type: "perf", release: "patch" },
            { type: "fix", release: "patch" },
            { type: "ci", release: "patch" },
            { type: "docs", release: "patch" },
            { type: "chore", release: "patch" },
            { type: "style", release: "patch" },
            { type: "test", release: "patch" },
            { type: "build", release: "patch" },
          ],
      },
    ]
  - [
      "@semantic-release/release-notes-generator",
      {
        preset: "conventionalcommits",
        presetConfig:
          {
            types:
              [
                { type: "minor", section: "ğŸ¯ Minor Release" },
                { type: "feat", section: "âœ¨ Features" },
                { type: "impr", section: "ğŸš€ Improvements" },
                { type: "refactor", section: "â™»ï¸ Improvements" },
                { type: "perf", section: "âš¡ï¸ Improvements" },
                { type: "build", section: "ğŸ“¦ Improvements" },
                { type: "fix", section: "ğŸ› Bug Fixes" },
                { type: "ci", section: "ğŸ‘· CI" },
                { type: "docs", section: "ğŸ“š Documentation" },
                { type: "chore", section: "ğŸ”§ Miscellaneous" },
                { type: "style", section: "ğŸ¨ Miscellaneous" },
                { type: "test", section: "âœ… Miscellaneous" },
              ],
          },
      },
    ]
  - [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i 's/^version = .*$/version = \"${nextRelease.version}\"/' config/shared.toml && python scripts/generate_pyproject.py",
      },
    ]
  - [
      "@semantic-release/github",
      {
        "releasedLabels": ["released"],
        "releaseNameTemplate": "ğŸš€ Version ${nextRelease.version}",
        "successComment": false,
      },
    ]
  - [
      "@semantic-release/git",
      {
        "assets": [
          "config/shared.toml",
          "**/pyproject.toml"
        ]
      },
    ]
repositoryUrl: "https://github.com/mloda-ai/mloda-registry"
