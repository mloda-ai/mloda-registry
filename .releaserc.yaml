branches:
  - main
tagFormat: ${version}
plugins:
  - [
      "@semantic-release/commit-analyzer",
      {
        preset: "conventionalcommits",
        releaseRules:
          [
            { type: "minor", release: "minor" },
            { type: "feat", release: "patch" },
            { type: "impr", release: "patch" },
            { type: "refactor", release: "patch" },
            { type: "perf", release: "patch" },
            { type: "fix", release: "patch" },
            { type: "ci", release: "patch" },
            { type: "docs", release: "patch" },
            { type: "chore", release: "patch" },
            { type: "style", release: "patch" },
            { type: "test", release: "patch" },
            { type: "build", release: "patch" },
          ],
      },
    ]
  - [
      "@semantic-release/release-notes-generator",
      {
        preset: "conventionalcommits",
        presetConfig:
          {
            types:
              [
                { type: "minor", section: "üéØ Minor Release" },
                { type: "feat", section: "‚ú® Features" },
                { type: "impr", section: "üöÄ Improvements" },
                { type: "refactor", section: "‚ôªÔ∏è Improvements" },
                { type: "perf", section: "‚ö°Ô∏è Improvements" },
                { type: "build", section: "üì¶ Improvements" },
                { type: "fix", section: "üêõ Bug Fixes" },
                { type: "ci", section: "üë∑ CI" },
                { type: "docs", section: "üìö Documentation" },
                { type: "chore", section: "üîß Miscellaneous" },
                { type: "style", section: "üé® Miscellaneous" },
                { type: "test", section: "‚úÖ Miscellaneous" },
              ],
          },
      },
    ]
  - [
      "@semantic-release/exec",
      {
        "prepareCmd": "sed -i 's/^version = .*$/version = \"${nextRelease.version}\"/' config/shared.toml && sed -i 's/MLODA_REGISTRY_VERSION:[0-9.]\\+}/MLODA_REGISTRY_VERSION:${nextRelease.version}}/g' tox.ini && python scripts/generate_pyproject.py",
      },
    ]
  - [
      "@semantic-release/github",
      {
        "releaseNameTemplate": "üöÄ Version ${nextRelease.version}",
        "successComment": false,
        "releasedLabels": false,
        "failComment": false,
      },
    ]
  - [
      "@semantic-release/git",
      {
        "assets": [
          "config/shared.toml",
          "**/pyproject.toml",
          "tox.ini"
        ]
      },
    ]
repositoryUrl: "https://github.com/mloda-ai/mloda-registry"
